(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88b45ed0"],{"360a":function(t,e,a){},"62d2":function(t,e,a){},7380:function(t,e,a){},d64e:function(t,e,a){},dc3f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isforgetPassword?a("div",{staticStyle:{height:"100%"}},[a("ForgetPassword",{on:{event:t.forgetPassword}})],1):a("div",{staticClass:"loginBox"},[a("span",{staticClass:"title"}),a("span",{staticClass:"nav"},[t._v("\n\t\t管理端\n\t")]),a("span",{staticClass:"body"},[t._m(0),a("span",{staticClass:"left"}),a("span",{staticClass:"right"}),a("span",{staticClass:"input",staticStyle:{"margin-top":"1.4rem"}},[a("van-field",{staticStyle:{background:"none"},attrs:{placeholder:"请输入邮箱号","input-align":"left"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),a("span",{staticClass:"input"},[a("van-field",{staticStyle:{background:"none"},attrs:{type:t.inputType,placeholder:"请输入密码","input-align":"left","right-icon":t.rightIcon},on:{"click-right-icon":t.rightIconBtn},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("span",{staticClass:"input",staticStyle:{border:"none"}},[a("van-button",{staticClass:"button",attrs:{round:"",type:"info",size:"large","loading-text":"登录中...","loading-type":"spinner",loading:t.loading,disabled:t.disabled},on:{click:t.loginBtn}},[t._v("登录")])],1),a("span",{staticClass:"bodyFooter",staticStyle:{color:"#2266F6"},on:{click:t.forgetPassword}},[t._v("\n\t\t\t忘记密码\n\t\t")])]),a("span",{staticClass:"loginFooter"})])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"top"},[a("span",{staticClass:"topLeft"},[a("span",{staticClass:"img"}),a("span",{staticClass:"text"},[t._v("\n\t\t\t\t\t账号登录\n\t\t\t\t")])])])}],o=a("cebc"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"forgetPageBox"},[1==t.state?a("getCodeComponet",{on:{event1:t.event}}):t._e(),2==t.state?a("setNewPassword",{attrs:{username:t.username,code:t.code},on:{event2:t.finish}}):t._e()],1)},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"forgetPage"},[a("h2",[t._v("邮箱验证")]),a("div",{staticClass:"item"},[a("h4",[t._v("邮箱")]),a("div",[a("van-field",{attrs:{left:"",placeholder:"请输入邮箱"},model:{value:t.fromData.username,callback:function(e){t.$set(t.fromData,"username",e)},expression:"fromData.username"}})],1)]),a("div",{staticClass:"item"},[a("h4",[t._v("验证码")]),a("div",[a("van-field",{attrs:{placeholder:"请输入短信验证码"},model:{value:t.fromData.code,callback:function(e){t.$set(t.fromData,"code",e)},expression:"fromData.code"}},[a("span",{staticClass:"loading",attrs:{slot:"button"},slot:"button"},[0==t.loadState?a("span",{staticClass:"code",on:{click:t.getCode}},[t._v("发送验证码")]):t._e(),1==t.loadState?a("van-loading",{attrs:{size:"20",color:"#4B74FF"}}):t._e(),2==t.loadState?a("span",{staticClass:"code"},[t._v(t._s(t.time)+"s")]):t._e()],1)])],1)]),a("div",{staticClass:"footer"},[a("van-button",{staticClass:"button",attrs:{size:"large",disabled:!t.disabled},on:{click:t.handleFrom}},[t._v("下一步")])],1)])},c=[],d=a("b70e"),u=a("b970"),f=a("c276"),m=a("c24f"),p={data:function(){return{time:60,loadState:0,setInterval:null,fromData:{username:"",code:""},rule:{username:{required:!0,type:"email",message:"请输入邮箱账号"}}}},computed:{disabled:function(){var t=!0;for(var e in this.fromData)""==this.fromData[e]&&(t=!1);return t}},methods:{getCode:function(){var t=this;Object(f["c"])(this.fromData,this.rule)&&(this.loadState=1,Object(m["c"])(this.fromData.username).then(function(e){t.loadState=2,t.setInterval=setInterval(function(){t.time<=0&&(clearInterval(t.setInterval),t.loadState=0),t.time--},1e3)}).catch(function(e){t.loadState=0,e.data.error?u["c"].fail(e.data.error):u["c"].fail("获取验证码失败")}))},handleFrom:function(){var t=this,e=this.fromData,a=e.username,s=e.code;Object(m["e"])({username:a,code:s}).then(function(e){t.$emit("event1",{username:a,code:s,index:2})}).catch(function(t){u["c"].fail(t.data.error)})}},mounted:function(){document.title="邮箱验证"},destroyed:function(){null!=this.setInterval&&clearInterval(this.setInterval)}},h=p,v=(a("edeb"),a("2877")),g=Object(v["a"])(h,l,c,!1,null,"b7d07448",null),w=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setNewBox"},[a("h2",[t._v("新密码")]),a("div",{staticClass:"item"},[a("h4",[t._v("新密码")]),a("div",[a("van-field",{attrs:{left:"",placeholder:"请输入新密码"},model:{value:t.fromData.password1,callback:function(e){t.$set(t.fromData,"password1",e)},expression:"fromData.password1"}})],1)]),a("div",{staticClass:"item"},[a("h4",[t._v("确认密码")]),a("div",[a("van-field",{attrs:{left:"",placeholder:"请再次输入密码"},model:{value:t.fromData.password2,callback:function(e){t.$set(t.fromData,"password2",e)},expression:"fromData.password2"}})],1)]),a("div",{staticClass:"footer"},[a("van-button",{staticClass:"button",attrs:{size:"large",loading:t.loading},on:{click:t.handleFrom}},[t._v("完成")])],1)])},C=[],_={props:["username","code"],data:function(){var t=function(t,e){var a=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;""==t?e(new d["a"]("密码不能为空")):a.test(t)?e():e(new d["a"]("请输入6~20位数字和字母组合"))},e=function(t,e,a){""==t?e(new d["a"]("请再次输入密码")):t!=a.password1?e(new d["a"]("两次输入密码不一致")):e()};return{loading:!1,fromData:{password1:"",password2:""},rule:{password1:{required:!0,validator:t},password2:{required:!0,validator:e}}}},methods:{handleFrom:function(){var t=this;if(Object(f["c"])(this.fromData,this.rule)){var e=fromData.password1;this.loading=!0,Object(m["b"])({username:username,code:code,password:e}).then(function(e){t.loading=!1,t.$emit("event2")}).catch(function(e){t.loading=!1,u["c"].fail(e.data.error)})}}}},y=_,D=(a("e8f0"),Object(v["a"])(y,b,C,!1,null,"7df09e66",null)),S=D.exports,$={components:{getCodeComponet:w,setNewPassword:S},data:function(){return{state:1,username:"",code:""}},methods:{event:function(t){this.state=t.index,this.username=t.username,this.code=t.code},finish:function(){this.$emit("event")}}},x=$,k=(a("e3a0"),Object(v["a"])(x,i,r,!1,null,"7d0867f3",null)),I=k.exports,F=(a("62d2"),a("2f62")),j={components:{ForgetPassword:I},data:function(){return{username:"",password:"",passwordFlag:!1,loading:!1,isforgetPassword:!1}},computed:{rightIcon:function(){return this.passwordFlag?"eye-o":"closed-eye"},inputType:function(){return this.passwordFlag?"text":"password"},disabled:function(){return""==this.username||""==this.password}},methods:Object(o["a"])({},Object(F["b"])(["handleLogin","getUserInfo"]),{forgetPassword:function(){this.isforgetPassword=!this.isforgetPassword},loginBtn:function(){var t=this;this.loading=!0,console.log(this.handleLogin);var e=this.username,a=this.password;this.handleLogin({userName:e,password:a}).then(function(s){t.loading=!1,console.log(s),localStorage.setItem("active",0),localStorage.setItem("jyH5",JSON.stringify({userName:e,password:a})),t.$router.push({name:t.$config.homeName})}).catch(function(e){t.loading=!1,console.log(e),e.data.error?t.$toast.fail(e.data.error[0]):t.$toast.fail("登录异常,请联系管理员")})},rightIconBtn:function(){this.passwordFlag=!this.passwordFlag},init:function(){if(localStorage.getItem("jyH5")){var t=JSON.parse(localStorage.getItem("jyH5")),e=t.userName,a=t.password;this.username=e,this.password=a}}}),mounted:function(){document.title="鲸唱结算平台",this.init()}},O=j,P=Object(v["a"])(O,s,n,!1,null,null,null);e["default"]=P.exports},e3a0:function(t,e,a){"use strict";var s=a("d64e"),n=a.n(s);n.a},e8f0:function(t,e,a){"use strict";var s=a("360a"),n=a.n(s);n.a},edeb:function(t,e,a){"use strict";var s=a("7380"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-88b45ed0.f644dbca.js.map