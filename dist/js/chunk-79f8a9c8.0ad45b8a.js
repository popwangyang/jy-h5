(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79f8a9c8"],{"03b2":function(t,e,a){"use strict";var n=a("682e"),i=a.n(n);i.a},1534:function(t,e,a){},"16f6":function(t,e,a){},"682e":function(t,e,a){},"8e76":function(t,e,a){"use strict";var n=a("16f6"),i=a.n(n);i.a},d065:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ICediteBox"},[a("span",{staticClass:"nav"},[t._v("\n\t\t  \t企业信息\n\t\t")]),a("van-field",{attrs:{clearable:"",label:"企业注册名称",placeholder:"请输入","input-align":"right"},model:{value:t.data.company_name,callback:function(e){t.$set(t.data,"company_name",e)},expression:"data.company_name"}}),a("van-field",{attrs:{clearable:"",label:"营业执照编号",placeholder:"请输入","input-align":"right"},model:{value:t.data.license_number,callback:function(e){t.$set(t.data,"license_number",e)},expression:"data.license_number"}}),a("Item3",{attrs:{title:"营业执照照片",src:t.data.license_photo.src},model:{value:t.data.license_photo.id,callback:function(e){t.$set(t.data.license_photo,"id",e)},expression:"data.license_photo.id"}}),a("span",{staticClass:"nav"},[t._v("\n\t\t  \t法人信息\n\t\t")]),a("van-field",{attrs:{clearable:"",label:"法人姓名",placeholder:"请输入","input-align":"right"},model:{value:t.data.legal_representative,callback:function(e){t.$set(t.data,"legal_representative",e)},expression:"data.legal_representative"}}),a("van-field",{attrs:{clearable:"",label:"身份证号",placeholder:"请输入","input-align":"right"},model:{value:t.data.legal_representative_card,callback:function(e){t.$set(t.data,"legal_representative_card",e)},expression:"data.legal_representative_card"}}),a("Item3",{attrs:{title:"身份证照片",src:t.data.identity_card_photo.src},model:{value:t.data.identity_card_photo.id,callback:function(e){t.$set(t.data.identity_card_photo,"id",e)},expression:"data.identity_card_photo.id"}}),a("span",{staticClass:"footer"},[a("van-button",{staticClass:"button",attrs:{size:"large",loading:t.loading,"loading-type":"spinner","loading-text":"加载中..."},on:{click:t.saveBtn}},[t._v(t._s(t.buttonText))])],1)],1)},i=[],s=a("71fd"),o=a("71a5"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list3Box"},[a("span",{staticClass:"title"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),a("span",{staticClass:"content"},[a("span",{staticClass:"item"},[""!=t.src&&"http"==t.src.substr(0,4)&&0==t.state?a("span",{staticClass:"box"},[a("van-image",{attrs:{width:"3.2rem",fit:"contain",src:t.src},on:{click:t.ImagePreviewBtn},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[t._v("加载失败")]},proxy:!0}],null,!1,3034482977)}),a("van-icon",{staticClass:"van-uploader__preview-delete",attrs:{name:"delete",size:"0.4rem",color:"#fff"},on:{click:t.deleteBtn}})],1):a("Upload",{ref:"upload",on:{upload:t.upload}})],1)])])},l=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"uploadBox"},[a("van-uploader",{directives:[{name:"show",rawName:"v-show",value:0==t.state,expression:"state == 0"}],attrs:{"after-read":t.afterRead,"max-count":1,multiple:""},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:1==t.state,expression:"state == 1"}],staticClass:"box1"},[a("van-image",{attrs:{width:"3.2rem",fit:"contain",src:t.src},on:{click:t.foo},scopedSlots:t._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[t._v("加载失败")]},proxy:!0}])}),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:1==t.closeState,expression:"closeState == 1"}],staticClass:"van-uploader__preview-delete",attrs:{name:"delete",size:"0.4rem",color:"#fff"},on:{click:t.deleteBtn}}),a("van-circle",{directives:[{name:"show",rawName:"v-show",value:1==t.showCircle,expression:"showCircle == 1"}],staticClass:"circle",attrs:{rate:t.rate,speed:100,size:"60px","stroke-width":80},model:{value:t.currentRate,callback:function(e){t.currentRate=e},expression:"currentRate"}},[a("span",{staticClass:"van-circle__text",staticStyle:{color:"white","font-weight":"bold"}},[t._v("\n\t\t\t  "+t._s(t.text)+"\n\t\t  ")])])],1)],1)},d=[],u=a("cb1d"),p=(a("7364"),a("66df")),f=function(t,e){return p["a"].request({headers:{"Content-Type":"application/json;"},url:t,method:"GET",params:e}).then(function(t){return t.data})},h={props:{id:{type:String,default:""}},data:function(){return{src:"",state:0,closeState:0,showCircle:0,currentRate:0,rate:0,fileList:[],fromData:{}}},computed:{text:function(){return this.currentRate.toFixed(0)+"%"}},methods:Object(u["a"])({foo:function(){console.log("ppppp"),Object(s["b"])([this.src])},deleteBtn:function(){},afterRead:function(t){var e=this;console.log(t),this.state=1,this.showCircle=1,this.closeState=0,this.src=t.content;var a={name:t.file.name,mime:t.file.type,size:1024*t.file.size},n=new Promise(function(n,i){f("/copyright/upload/upload",a).then(function(a){e.fromData.token=a.credential,e.fromData.name=t.file.name,e.fromData.key=a.key,e.fromData.id=""===e.id?"":e.id,e.fromData.file=t.file,n(!0)}).catch(function(t){i(!1)})});n.then(function(){e.upload(e.fromData)})},upload:function(t){var e=this,a=new FormData;a.append("file",t.file),a.append("token",t.token),a.append("file",t.name),a.append("key",t.key),a.append("x:id",t.id);var n=new XMLHttpRequest;n.open("POST","https://up-z1.qiniup.com/",!0),n.onload=this.uploadCom,n.onerror=this.uploadFail,n.upload.onprogress=this.progressFunction,n.send(a),n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(201===n.status){var t=JSON.parse(n.responseText);t.data;e.$emit("upload",t.id)}else try{var a=JSON.parse(n.responseText)["msg"];message.error(a,10)}catch(i){}}},progressFunction:function(t){this.state=1,this.rate=t.loaded/t.total*100,console.log(t)},uploadCom:function(t){var e=this;setTimeout(function(){e.closeState=1,e.showCircle=0},200)},uploadFail:function(){console.log("uploadFail")}},"deleteBtn",function(){console.log("deleteBtn"),this.fileList=[],this.state=0,this.closeState=0,this.rate=0,this.fromData={},this.$emit("upload","")}),mounted:function(){}},_=h,m=(a("8e76"),a("17cc")),v=Object(m["a"])(_,c,d,!1,null,"6104a8fc",null),g=v.exports,y={components:{Upload:g},props:{title:{type:String,default:"营业执照附件"},src:{type:String,default:""},value:{type:String,default:""}},model:{prop:"value",event:"returnBack"},data:function(){return{state:0}},methods:{upload:function(t){console.log(t),this.$emit("returnBack",t.id+"")},ImagePreviewBtn:function(){Object(s["b"])([this.src])},deleteBtn:function(){console.log("d"),this.state=1,this.$emit("returnBack","")}}},b=y,w=(a("f5f7"),Object(m["a"])(b,r,l,!1,null,"46250544",null)),x=w.exports,k={components:{Item3:x},data:function(){return{loading:!1,data:{company_name:"",license_number:"",license_photo:{id:"",src:""},legal_representative:"",legal_representative_card:"",identity_card_photo:{id:"",src:""}}}},computed:{buttonText:function(){return"edite"==this.$route.query.type?"保存":"创建"}},methods:{onClickLeft:function(){this.$router.go(-1)},saveBtn:function(){var t=this;this.loading=!0;var e={company_name:this.data.company_name,license_number:this.data.license_number,license_photo:this.data.license_photo.id,legal_representative:this.data.legal_representative,legal_representative_card:this.data.legal_representative_card,identity_card_photo:this.data.identity_card_photo.id,ktv:this.$route.query.id};console.log(e),"create"==this.$route.query.type?Object(o["b"])(e).then(function(e){t.loading=!1,s["c"].success("创建成功"),t.$router.go(-1)}).catch(function(e){t.loading=!1,e.data.legal_representative_card?s["c"].fail(e.data.legal_representative_card[0]):s["c"].fail("创建失败")}):Object(o["k"])(e).then(function(e){t.loading=!1,s["c"].success("修改成功"),t.$router.go(-1)}).catch(function(e){t.loading=!1,e.data.legal_representative_card?s["c"].fail(e.data.legal_representative_card[0]):s["c"].fail("修改失败")})},init:function(){if("edite"==this.$route.query.type){var t=JSON.parse(this.$route.query.data);this.data.company_name=t.company_name,this.data.license_number=t.license_number,this.data.license_photo={id:t.license_photo.id+"",src:t.license_photo.download_url},this.data.legal_representative=t.legal_representative,this.data.legal_representative_card=t.legal_representative_card,this.data.identity_card_photo={id:t.identity_card_photo.id+"",src:t.identity_card_photo.download_url},console.log(this.data)}}},mounted:function(){document.title="企业信息",this.init()}},C=k,$=(a("03b2"),Object(m["a"])(C,n,i,!1,null,"308bd060",null));e["default"]=$.exports},f5f7:function(t,e,a){"use strict";var n=a("1534"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-79f8a9c8.0ad45b8a.js.map