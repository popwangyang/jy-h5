(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25ef7f10"],{"112f":function(t,e,n){},3721:function(t,e,n){"use strict";var a=n("9f98"),o=n.n(a);o.a},3724:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"van-cell",staticStyle:{"border-bottom":"1px solid #ebedf0",position:"relative"}},[t.required?n("span",{staticStyle:{color:"red",position:"absolute",left:"6px",top:"9px"}},[t._v("*")]):t._e(),n("div",{staticClass:"van-cell van-field",staticStyle:{padding:"0"},on:{click:t.clickBtn}},[n("div",{staticClass:"van-cell__title van-field__label"},[t._v(t._s(t.label))]),n("div",{staticClass:"van-cell__value",staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[""==t.value?n("span",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.placeholder)+"\n\t\t\t\t\t\t")]):n("span",{staticStyle:{color:"#000000"}},["map"==t.type?n("span",[t._v("\n\t\t\t\t\t\t\t  "+t._s(t._f("MapFilter")(t.value))+"\n\t\t\t\t\t\t\t")]):n("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.value)+"\n\t\t\t\t\t\t\t")])]),n("van-icon",{staticStyle:{"margin-left":"4px"},attrs:{name:"arrow",size:"16px"}})],1)]),n("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},["default"==t.type?n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:t.onCancel,confirm:t.onConfirm}}):t._e(),"map"==t.type?n("van-area",{attrs:{"area-list":t.areaList},on:{cancel:t.onCancel,confirm:t.onConfirm}}):t._e(),"date"==t.type?n("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,formatter:t.formatter},on:{cancel:t.onCancel,confirm:t.onConfirm},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}):t._e(),"time"==t.type?n("van-datetime-picker",{attrs:{type:"time",disabled:t.disabled,"min-hour":t.minHour,"max-hour":t.maxHour,"min-minute":t.minMinute,"max-minute":t.maxMinute},on:{cancel:t.onCancel,confirm:t.onConfirm},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}}):t._e()],1)],1)},o=[],i=(n("c5f6"),n("1462")),r=n("90de"),l=n("c276"),s={props:{required:{type:Boolean,default:!1},type:{type:String,default:"default"},label:{type:String,default:"eee"},placeholder:{type:String,default:"请输入"},columns:{type:Array,default:function(){return[]}},minHour:{type:Number,default:0},maxHour:{type:Number,default:23},minMinute:{type:Number,default:0},maxMinute:{type:Number,default:59},disabled:{type:Boolean,default:!1},value:[String,Array]},model:{prop:"value",event:"returnBack"},filters:{MapFilter:function(t){return console.log(t),Object(r["c"])(t)}},computed:{mapValue:function(){return"map"==this.type?this.value[2].code:""}},data:function(){return{show:!1,areaList:i["default"],minDate:new Date(2e3,1,1),currentDate:new Date,currentTime:"12:00"}},methods:{formatter:function(t,e){return"year"===t?"".concat(e,"年"):"month"===t?"".concat(e,"月"):"day"===t?"".concat(e,"日"):e},clickBtn:function(){this.disabled||(this.show=!0)},onCancel:function(){this.defaultIndex=0,this.show=!1},onConfirm:function(t,e){var n="";switch(this.type){case"default":n=t;break;case"map":n=t;break;case"date":n=Object(l["h"])(t);break;case"time":n=t,this.$emit("change",t);break}this.$emit("returnBack",n),this.show=!1}},mounted:function(){}},c=s,d=(n("7bdd"),n("2877")),u=Object(d["a"])(c,a,o,!1,null,"e133b4d2",null);e["a"]=u.exports},"7bdd":function(t,e,n){"use strict";var a=n("112f"),o=n.n(a);o.a},"7cdf":function(t,e,n){var a=n("5ca1");a(a.S,"Number",{isInteger:n("9c12")})},"8ff2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editBox"},[n("SelectComponent",{attrs:{label:"vod品牌",placeholder:"请选择",type:"default",required:!0,columns:t._f("vodFilter")(t.columns)},model:{value:t.data.vod_brand,callback:function(e){t.$set(t.data,"vod_brand",e)},expression:"data.vod_brand"}}),n("van-field",{attrs:{required:"",label:"系统版本号",placeholder:"请输入","input-align":"right"},model:{value:t.data.vod_version,callback:function(e){t.$set(t.data,"vod_version",e)},expression:"data.vod_version"}}),n("van-field",{attrs:{required:"",label:"vod场所ID",placeholder:"请输入","input-align":"right"},model:{value:t.data.vod_ktv_id,callback:function(e){t.$set(t.data,"vod_ktv_id",e)},expression:"data.vod_ktv_id"}}),n("van-field",{attrs:{required:"",label:"实施包厢数",placeholder:"请输入","input-align":"right"},model:{value:t.data.implement_box_count,callback:function(e){t.$set(t.data,"implement_box_count",e)},expression:"data.implement_box_count"}}),n("span",{staticClass:"footer"},[n("van-button",{staticClass:"button",attrs:{size:"large",loading:t.loading,"loading-type":"spinner","loading-text":"加载中..."},on:{click:t.saveBtn}},[t._v("保存")])],1)],1)},o=[],i=(n("c5f6"),n("7cdf"),n("b70e")),r=n("c276"),l=n("71a5"),s=n("b970"),c=n("3724"),d={components:{SelectComponent:c["a"]},data:function(){var t=function(t,e){console.log(Number.isInteger(parseInt(t)),parseInt(t)),""==t?e(new i["a"]("包厢数不能为空")):!Number.isInteger(parseInt(t))||parseInt(t)<=0?e(new i["a"]("包厢数为大于0的正整数")):e()},e=function(t,e){""==t?e(new i["a"]("系统版本号不能为空")):t.length>50?e(new i["a"]("系统版本号不能超过50个字符")):e()},n=function(t,e){""==t?e(new i["a"]("vod场所ID不能为空")):t.length>50?e(new i["a"]("vod场所ID不能超过50个字符")):e()};return{columns:[],loading:!1,ktvID:"",id:"",data:{vod_ktv_id:"",vod_version:"",vod_brand:"",implement_box_count:""},rule:{vod_brand:{required:!0,message:"请选择vode品牌"},vod_version:{required:!0,validator:e},vod_ktv_id:{required:!0,validator:n},implement_box_count:{required:!0,validator:t}}}},filters:{vodFilter:function(t){return t.reduce(function(t,e){return t.push(e.brand),t},[])}},methods:{onClickLeft:function(){this.$router.go(-1)},saveBtn:function(){var t=this;if(Object(r["c"])(this.data,this.rule)){var e={vod_ktv_id:this.data.vod_ktv_id,vod_version:this.data.vod_version,vod_brand:this.columns.filter(function(e){return e.brand==t.data.vod_brand})[0].id,implement_box_count:parseInt(this.data.implement_box_count),ktv:this.ktvID};console.log(e,"提交信息"),this.loading=!0,"create"==this.$route.query.type?Object(l["b"])(e).then(function(e){t.loading=!1,s["d"].success("创建成功"),setTimeout(function(){t.$router.go(-1)},500),console.log(e)}).catch(function(e){t.loading=!1,s["d"].fail(e.data.message)}):(e.id=this.id,Object(l["g"])(e).then(function(e){t.loading=!1,s["d"].success("保存成功"),setTimeout(function(){t.$router.go(-1)},500),console.log(e)}).catch(function(e){t.loading=!1,s["d"].fail(e.data.message)}))}},getVodList:function(){var t=this;Object(l["p"])().then(function(e){t.columns=e.data.results})}},mounted:function(){if(document.title="实施信息",this.ktvID=this.$route.query.ktvID,this.id=this.$route.query.id,this.getVodList(),"edite"==this.$route.query.type){var t=JSON.parse(this.$route.query.data);console.log(t),this.id=t.id,this.data.vod_ktv_id=t.vod_ktv_id,this.data.vod_version=t.vod_version,this.data.vod_brand=t.vod_brand,this.data.implement_box_count=t.implement_box_count}}},u=d,v=(n("3721"),n("2877")),f=Object(v["a"])(u,a,o,!1,null,"621d262a",null);e["default"]=f.exports},"9c12":function(t,e,n){var a=n("d3f4"),o=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&o(t)===t}},"9f98":function(t,e,n){}}]);
//# sourceMappingURL=chunk-25ef7f10.e8cd0643.js.map