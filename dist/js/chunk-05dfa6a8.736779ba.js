(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05dfa6a8"],{"112f":function(t,e,a){},3724:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"van-cell",staticStyle:{"border-bottom":"1px solid #ebedf0",position:"relative"}},[t.required?a("span",{staticStyle:{color:"red",position:"absolute",left:"6px",top:"9px"}},[t._v("*")]):t._e(),a("div",{staticClass:"van-cell van-field",staticStyle:{padding:"0"},on:{click:t.clickBtn}},[a("div",{staticClass:"van-cell__title van-field__label"},[t._v(t._s(t.label))]),a("div",{staticClass:"van-cell__value",staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end"}},[""==t.value?a("span",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.placeholder)+"\n\t\t\t\t\t\t")]):a("span",{staticStyle:{color:"#000000"}},["map"==t.type?a("span",[t._v("\n\t\t\t\t\t\t\t  "+t._s(t._f("MapFilter")(t.value))+"\n\t\t\t\t\t\t\t")]):a("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.value)+"\n\t\t\t\t\t\t\t")])]),a("van-icon",{staticStyle:{"margin-left":"4px"},attrs:{name:"arrow",size:"16px"}})],1)]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},["default"==t.type?a("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:t.onCancel,confirm:t.onConfirm}}):t._e(),"map"==t.type?a("van-area",{attrs:{"area-list":t.areaList},on:{cancel:t.onCancel,confirm:t.onConfirm}}):t._e(),"date"==t.type?a("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate,formatter:t.formatter},on:{cancel:t.onCancel,confirm:t.onConfirm},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}}):t._e(),"time"==t.type?a("van-datetime-picker",{attrs:{type:"time",disabled:t.disabled,"min-hour":t.minHour,"max-hour":t.maxHour,"min-minute":t.minMinute,"max-minute":t.maxMinute},on:{cancel:t.onCancel,confirm:t.onConfirm},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}}):t._e()],1)],1)},i=[],o=(a("c5f6"),a("1462")),c=a("90de"),s=a("c276"),l={props:{required:{type:Boolean,default:!1},type:{type:String,default:"default"},label:{type:String,default:"eee"},placeholder:{type:String,default:"请输入"},columns:{type:Array,default:function(){return[]}},minHour:{type:Number,default:0},maxHour:{type:Number,default:23},minMinute:{type:Number,default:0},maxMinute:{type:Number,default:59},disabled:{type:Boolean,default:!1},value:[String,Array]},model:{prop:"value",event:"returnBack"},filters:{MapFilter:function(t){return console.log(t),Object(c["c"])(t)}},computed:{mapValue:function(){return"map"==this.type?this.value[2].code:""}},data:function(){return{show:!1,areaList:o["default"],minDate:new Date(2e3,1,1),currentDate:new Date,currentTime:"12:00"}},methods:{formatter:function(t,e){return"year"===t?"".concat(e,"年"):"month"===t?"".concat(e,"月"):"day"===t?"".concat(e,"日"):e},clickBtn:function(){this.disabled||(this.show=!0)},onCancel:function(){this.defaultIndex=0,this.show=!1},onConfirm:function(t,e){var a="";switch(this.type){case"default":a=t;break;case"map":a=t;break;case"date":a=Object(s["e"])(t);break;case"time":a=t,this.$emit("change",t);break}this.$emit("returnBack",a),this.show=!1}},mounted:function(){}},r=l,u=(a("7bdd"),a("2877")),d=Object(u["a"])(r,n,i,!1,null,"e133b4d2",null);e["a"]=d.exports},"6ada":function(t,e,a){"use strict";var n=a("a204"),i=a.n(n);i.a},"7bdd":function(t,e,a){"use strict";var n=a("112f"),i=a.n(n);i.a},a204:function(t,e,a){},a8a1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editAccountInformationBox"},[a("van-field",{attrs:{label:"账号",required:"","input-align":"right",placeholder:"请输入邮箱地址"},model:{value:t.data.username,callback:function(e){t.$set(t.data,"username",e)},expression:"data.username"}}),"edit"!=t.$route.query.type?a("van-field",{attrs:{label:"初始密码",required:"",type:"text","input-align":"right",placeholder:"请输入"},model:{value:t.data.password,callback:function(e){t.$set(t.data,"password",e)},expression:"data.password"}}):t._e(),a("SelectComponent",{attrs:{label:"所属品牌",placeholder:"请选择",type:"default",required:!0,columns:t.columns},model:{value:t.data.AccountType,callback:function(e){t.$set(t.data,"AccountType",e)},expression:"data.AccountType"}}),a("div",{staticClass:"van-cell van-field"},[a("div",{staticClass:"van-cell__title van-field__label"},[t._v("是否启用")]),a("div",{staticClass:"van-cell__value"},[a("van-switch",{attrs:{size:"22px"},model:{value:t.data.is_active,callback:function(e){t.$set(t.data,"is_active",e)},expression:"data.is_active"}})],1)]),a("span",{staticClass:"footer"},[a("van-button",{staticClass:"button",attrs:{loading:t.loading,"loading-type":"spinner","loading-text":"加载中...",size:"large"},on:{click:t.onClickBtn}},[t._v(t._s(t.buttonText))])],1)],1)},i=[],o=(a("ac6a"),a("456d"),a("3724")),c=a("b70e"),s=a("c276"),l=a("71a5"),r=a("b970"),u={components:{SelectComponent:o["a"]},data:function(){var t=function(t,e){var a=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;""==t?e(new c["a"]("账号密码不能为空")):a.test(t)?e():e(new c["a"]("请输入6~20位数字和字母组合"))};return{loading:!1,columns:["k乐宝","丽音动感"],data:{accountType:"",username:"",password:"",is_active:!0,group:[],ktv_id:this.$route.query.ktvID,id:""},buttonText:"",ToastText:"",ktvID:"",rule:{accountType:{required:!0,message:"品牌名称不能为空"},username:{required:!0,type:"email",message:"邮箱账号不能为空"},password:{required:!0,validator:t}}}},computed:{},methods:{onClickBtn:function(){var t=this;if("edit"==this.$route.query.type&&delete this.rule.password,Object(s["c"])(this.data,this.rule)){this.loading=!0;var e=Object.assign({},this.data);e.is_active=e.is_active?1:0,console.log(e),"create"==this.$route.query.type?Object(l["w"])(e).then(function(e){console.log(e),t.loading=!1,r["c"].success("账号创建成功"),setTimeout(function(){t.$router.go(-1)},500)}).catch(function(e){t.loading=!1,e.data?r["c"].fail(e.data.non_field_errors[0]):r["c"].fail("账号创建异常")}):(delete e.password,Object(l["f"])(e).then(function(e){console.log(e),t.loading=!1,r["c"].success("账号修改成功"),setTimeout(function(){t.$router.go(-1)},500)}).catch(function(e){t.loading=!1,r["c"].fail("账号修改失败")}))}},getDetail:function(){var t=this,e={code:"K",ktv_id:this.ktvID};r["c"].loading({duration:0,forbidClick:!0,loadingType:"circular"}),Object(l["i"])(e).then(function(e){r["c"].clear(),Object.keys(t.data).map(function(a){return t.data[a]="group"==a?[e.data.results[0].group[0].id]:e.data.results[0][a]}),console.log(t.data)})}},mounted:function(){"edit"==this.$route.query.type?(document.title="编辑账号",this.buttonText="保存",this.ToastText="保存成功",this.ktvID=this.$route.query.ktvID,this.getDetail()):(document.title="新建账号",this.buttonText="新建试用账号",this.ToastText="创建成功")}},d=u,p=(a("6ada"),a("2877")),f=Object(p["a"])(d,n,i,!1,null,"2e70910c",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-05dfa6a8.736779ba.js.map