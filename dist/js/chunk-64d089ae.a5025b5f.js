(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64d089ae"],{2530:function(e,t,a){},"2d27":function(e,t,a){"use strict";var n=a("2530"),i=a.n(n);i.a},"66c3":function(e,t,a){"use strict";var n=a("f3bb"),i=a.n(n);i.a},"66fe":function(e,t,a){"use strict";var n=a("c4fb"),i=a.n(n);i.a},a36f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list3Box"},[a("span",{staticClass:"title"},[e._v("\n\t\t"+e._s(e.title)+"\n\t")]),a("span",{staticClass:"content"},[a("span",{staticClass:"item"},[""!=e.src&&"http"==e.src.substr(0,4)&&0==e.state?a("span",{staticClass:"box"},[a("van-image",{attrs:{width:"3.2rem",fit:"contain",src:e.src},on:{click:e.ImagePreviewBtn},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v("加载失败")]},proxy:!0}],null,!1,3034482977)}),a("van-icon",{staticClass:"delete",attrs:{name:"delete",size:"0.6rem",color:"#fff"},on:{click:e.deleteBtn}})],1):e._e(),a("span",{staticStyle:{"align-self":"flex-end","margin-left":"10px","font-size":"14px"}},[e._v("\n\t\t\t\t"+e._s(e.fileName)+"\n\t\t\t")]),""==e.src||"http"!=e.src.substr(0,4)||0!=e.state?a("Upload",{ref:"upload",on:{upload:e.upload}}):e._e()],1)])])},i=[],s=(a("7f7f"),a("b970")),r=(a("71a5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uploadBox"},[a("van-uploader",{directives:[{name:"show",rawName:"v-show",value:0==e.state,expression:"state == 0"}],attrs:{"after-read":e.afterRead,"max-count":1,multiple:""},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.state,expression:"state == 1"}],staticClass:"box1"},[a("van-image",{attrs:{width:"3.2rem",fit:"contain",src:e.src},on:{click:e.foo},scopedSlots:e._u([{key:"loading",fn:function(){return[a("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0},{key:"error",fn:function(){return[e._v("加载失败")]},proxy:!0}])}),a("van-icon",{directives:[{name:"show",rawName:"v-show",value:1==e.closeState,expression:"closeState == 1"}],staticClass:"delete",attrs:{name:"delete",size:"0.6rem",color:"#fff"},on:{click:e.deleteBtn}}),a("van-circle",{directives:[{name:"show",rawName:"v-show",value:1==e.showCircle,expression:"showCircle == 1"}],staticClass:"circle",attrs:{rate:e.rate,speed:100,size:"60px","stroke-width":80},model:{value:e.currentRate,callback:function(t){e.currentRate=t},expression:"currentRate"}},[a("span",{staticClass:"van-circle__text",staticStyle:{color:"white","font-weight":"bold"}},[e._v("\n\t\t\t  "+e._s(e.text)+"\n\t\t  ")])])],1),a("span",{staticStyle:{"align-self":"flex-end","font-size":"14px","margin-left":"10px"}},[e._v("\n\t\t"+e._s(e.fileName)+"\n\t")])],1)}),o=[],l=a("66df"),c=function(e,t){return l["a"].request({headers:{"Content-Type":"application/json;"},url:e,method:"GET",params:t}).then(function(e){return e.data})},d={props:{id:{type:String,default:""}},data:function(){return{src:"",state:0,closeState:0,showCircle:0,currentRate:0,rate:0,fileList:[],fromData:{},fileName:""}},computed:{text:function(){return this.currentRate.toFixed(0)+"%"}},methods:{foo:function(){console.log("ppppp"),Object(s["b"])([this.src])},afterRead:function(e){var t=this;console.log(e),this.fileName=e.file.name,this.state=1,this.showCircle=1,this.closeState=0,this.src=e.content;var a={name:e.file.name,mime:e.file.type,size:1024*e.file.size},n=new Promise(function(n,i){c("/copyright/upload/upload",a).then(function(a){t.fromData.token=a.credential,t.fromData.name=e.file.name,t.fromData.key=a.key,t.fromData.id=""===t.id?"":t.id,t.fromData.file=e.file,n(!0)}).catch(function(e){i(!1)})});n.then(function(){t.upload(t.fromData)})},upload:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("token",e.token),a.append("file",e.name),a.append("key",e.key),a.append("x:id",e.id);var n=new XMLHttpRequest;n.open("POST","https://up-z1.qiniup.com/",!0),n.onload=this.uploadCom,n.onerror=this.uploadFail,n.upload.onprogress=this.progressFunction,n.send(a),n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(201===n.status){var e=JSON.parse(n.responseText);e.data;t.$emit("upload",e.id)}else try{var a=JSON.parse(n.responseText)["msg"];message.error(a,10)}catch(i){}}},progressFunction:function(e){this.state=1,this.rate=e.loaded/e.total*100,console.log(e)},uploadCom:function(e){var t=this;setTimeout(function(){t.closeState=1,t.showCircle=0},200)},uploadFail:function(){console.log("uploadFail")},deleteBtn:function(){console.log("deleteBtn"),this.fileName="",this.fileList=[],this.state=0,this.closeState=0,this.rate=0,this.fromData={},this.$emit("upload","")}},mounted:function(){}},u=d,p=(a("66fe"),a("2877")),f=Object(p["a"])(u,r,o,!1,null,"6d2d54f2",null),h=f.exports,m={components:{Upload:h},props:{title:{type:String,default:""},src:{type:String,default:""},name:{type:String,default:""},value:{type:String,default:""}},model:{prop:"value",event:"returnBack"},data:function(){return{state:0,fileName:this.name}},methods:{upload:function(e){console.log(e),this.$emit("returnBack",e+"")},ImagePreviewBtn:function(){Object(s["b"])([this.src])},deleteBtn:function(){console.log("d"),this.state=1,this.fileName="",this.$emit("returnBack","")}}},_=m,v=(a("66c3"),Object(p["a"])(_,n,i,!1,null,"35fa7c34",null));t["a"]=v.exports},c4fb:function(e,t,a){},d065:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ICediteBox"},[a("span",{staticClass:"nav"},[e._v("\n\t\t  \t企业信息\n\t\t")]),a("van-field",{attrs:{label:"企业注册名称",placeholder:"请输入",required:"","input-align":"right"},model:{value:e.data.company_name,callback:function(t){e.$set(e.data,"company_name",t)},expression:"data.company_name"}}),a("van-field",{attrs:{required:"",label:"营业执照编号",placeholder:"请输入","input-align":"right"},model:{value:e.data.license_number,callback:function(t){e.$set(e.data,"license_number",t)},expression:"data.license_number"}}),a("Item3",{attrs:{title:"营业执照照片",src:e.data.license_photo.src},model:{value:e.data.license_photo.id,callback:function(t){e.$set(e.data.license_photo,"id",t)},expression:"data.license_photo.id"}}),a("span",{staticClass:"nav"},[e._v("\n\t\t  \t法人信息\n\t\t")]),a("van-field",{attrs:{required:"",label:"法人姓名",placeholder:"请输入","input-align":"right"},model:{value:e.data.legal_representative,callback:function(t){e.$set(e.data,"legal_representative",t)},expression:"data.legal_representative"}}),a("van-field",{attrs:{required:"",label:"身份证号",placeholder:"请输入","input-align":"right"},model:{value:e.data.legal_representative_card,callback:function(t){e.$set(e.data,"legal_representative_card",t)},expression:"data.legal_representative_card"}}),a("Item3",{attrs:{title:"身份证照片",src:e.data.identity_card_photo.src},model:{value:e.data.identity_card_photo.id,callback:function(t){e.$set(e.data.identity_card_photo,"id",t)},expression:"data.identity_card_photo.id"}}),a("span",{staticClass:"footer"},[a("van-button",{staticClass:"button",attrs:{size:"large",loading:e.loading,"loading-type":"spinner","loading-text":"加载中..."},on:{click:e.saveBtn}},[e._v(e._s(e.buttonText))])],1)],1)},i=[],s=a("b70e"),r=a("c276"),o=a("b970"),l=a("71a5"),c=a("a36f"),d={components:{Item3:c["a"]},data:function(){var e=function(e,t){""===e?t(new s["a"]("企业名字不能为空")):e.length>20?t(new s["a"]("企业名字应小于20个字")):t()},t=function(e,t){var a=/^[0-9a-zA-Z]{1,}$/;""===e?t(new s["a"]("营业执照注册号不能为空")):e.length>20?t(new s["a"]("营业执照注册号不能超过20个字符")):a.test(e)?t():t(new s["a"]("营业执照注册号为数字和字母组合"))};return{loading:!1,data:{company_name:"",license_number:"",license_photo:{id:"",src:""},legal_representative:"",legal_representative_card:"",identity_card_photo:{id:"",src:""},id:""},rule:{company_name:{required:!0,validator:e},license_number:{required:!0,validator:t},license_photo:{required:!0,message:"请上传营业执照照片"},legal_representative:{required:!0,message:"法人代表名称不能为空"},legal_representative_card:{required:!0,type:"IDcard",message:"法人身份证号不能为空"},identity_card_photo:{required:!0,message:"请上传身份证照片"}}}},computed:{buttonText:function(){return"edite"==this.$route.query.type?"保存":"创建"}},methods:{onClickLeft:function(){this.$router.go(-1)},saveBtn:function(){var e=this,t={company_name:this.data.company_name,license_number:this.data.license_number,license_photo:this.data.license_photo.id,legal_representative:this.data.legal_representative,legal_representative_card:this.data.legal_representative_card,identity_card_photo:this.data.identity_card_photo.id,ktv:this.$route.query.id};Object(r["c"])(t,this.rule)&&(this.loading=!0,console.log(t),"create"==this.$route.query.type?Object(l["d"])(t).then(function(t){e.loading=!1,o["c"].success("创建成功"),e.$router.go(-1)}).catch(function(t){e.loading=!1,t.data.legal_representative_card?o["c"].fail(t.data.legal_representative_card[0]):o["c"].fail("创建失败")}):(t.id=this.data.id,Object(l["t"])(t).then(function(t){e.loading=!1,o["c"].success("修改成功"),e.$router.go(-1)}).catch(function(t){e.loading=!1,t.data.legal_representative_card?o["c"].fail(t.data.legal_representative_card[0]):o["c"].fail("修改失败")})))},init:function(){if("edite"==this.$route.query.type){var e=JSON.parse(this.$route.query.data);this.data.company_name=e.company_name,this.data.license_number=e.license_number,this.data.license_photo={id:e.license_photo.id+"",src:e.license_photo.download_url},this.data.legal_representative=e.legal_representative,this.data.legal_representative_card=e.legal_representative_card,this.data.identity_card_photo={id:e.identity_card_photo.id+"",src:e.identity_card_photo.download_url},this.data.id=e.id,console.log(this.data)}}},mounted:function(){document.title="企业信息",this.init()}},u=d,p=(a("2d27"),a("2877")),f=Object(p["a"])(u,n,i,!1,null,"bbcf76d4",null);t["default"]=f.exports},f3bb:function(e,t,a){}}]);
//# sourceMappingURL=chunk-64d089ae.a5025b5f.js.map